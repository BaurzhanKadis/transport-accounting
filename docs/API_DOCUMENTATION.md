# Документация API - Учет Транспорта

## Введение

Этот документ предоставляет подробную информацию об эндпоинтах API для приложения "Учет Транспорта".

## Аутентификация

Большинство эндпоинтов требуют аутентификации. Аутентификация обрабатывается с использованием Supabase Auth.
Пользователям необходимо включить свой JWT токен Supabase в заголовок `Authorization` как Bearer токен:

```
Authorization: Bearer <ВАШ_SUPABASE_JWT>
```

## Базовый URL

Базовый URL для всех эндпоинтов API: `/api`.

## Эндпоинты

### Эндпоинты Пользователя (`/api/user`)

#### GET `/api/user/me`

- **Описание:** Получает детали текущего аутентифицированного пользователя.
- **Аутентификация:** Требуется (Supabase JWT).
- **Ответы:**
  - `200 OK`: Возвращает объект пользователя.
    ```json
    {
      "id": "string",
      "email": "string",
      "metadata": {
        "full_name": "string",
        "avatar_url": "string"
      },
      "createdAt": "string (ISO 8601)",
      "lastSignIn": "string (ISO 8601)"
    }
    ```
  - `401 Unauthorized`: Если пользователь не аутентифицирован.
  - `404 Not Found`: Если данные пользователя не найдены.
  - `500 Internal Server Error`: Если произошла ошибка на стороне сервера.

---

### Эндпоинты Транспорта (`/api/transport`)

#### POST `/api/transport/create`

- **Описание:** Создает новую запись о транспорте.
- **Аутентификация:** Требуется (Supabase JWT).
- **Тело запроса:**
  ```json
  {
    "brand": "string",
    "model": "string",
    "year": "integer",
    "gos_number": "string",
    "category_id": "integer",
    "fuel_type": "string",
    "body_type": "string",
    "engine_capacity": "number",
    "vin_number": "string",
    "registration_certificate": "string",
    "color": "string",
    "transport_type": "string"
  }
  ```
- **Ответы:**
  - `201 Created`: Возвращает только что созданный объект транспорта.
  - `400 Bad Request`: Если тело запроса неверно или отсутствуют обязательные поля.
  - `401 Unauthorized`: Если пользователь не аутентифицирован.
  - `500 Internal Server Error`: Если произошла ошибка на стороне сервера (например, проблема с базой данных).

#### GET `/api/transport`

- **Описание:** Получает список всех записей о транспорте.
- **Аутентификация:** Требуется (Supabase JWT).
- **Параметры запроса (Необязательные):**
  - `page`: Integer (для пагинации)
  - `limit`: Integer (для пагинации)
  - `search`: String (для поиска по марке, модели, гос. номеру и т.д.)
- **Ответы:**
  - `200 OK`: Возвращает массив объектов транспорта.
  - `401 Unauthorized`: Если пользователь не аутентифицирован.
  - `500 Internal Server Error`: Если произошла ошибка на стороне сервера.

---

### Эндпоинты Категорий (`/api/category`)

#### GET `/api/category`

- **Описание:** Получает список всех категорий транспорта.
- **Аутентификация:** Требуется (Supabase JWT).
- **Ответы:**
  - `200 OK`: Возвращает массив объектов категорий.
    ```json
    [
      {
        "id": "integer",
        "name": "string"
      }
    ]
    ```
  - `401 Unauthorized`: Если пользователь не аутентифицирован.
  - `500 Internal Server Error`: Если произошла ошибка на стороне сервера.

---

### Эндпоинты Статусов (`/api/status`)

_(Документация для эндпоинтов статусов должна быть добавлена на основе их реализации)_

---

### Эндпоинты Записей о ТО (`/api/maintenanceRecord`)

_(Документация для эндпоинтов записей о ТО должна быть добавлена на основе их реализации)_

---
